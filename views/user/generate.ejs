
<html>
<head>
	<title>Demo 1 : Convert All Textareas</title>
	<link rel="stylesheet" href="/css/login.css" type="text/css" />
	<link rel="stylesheet" href="/css/button.css" type="text/css" />
	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	
	<script type="text/javascript">
		
		function createUser(){
			
			email = $('#email').val();
			username = email;
			password = $('#password').val();
			confirmPassword  = $('#confirm_password').val();
			path = "/user/createUser" ;
			var request= {
		            action : path,
		            email: email,
		            username: username,
		            password: password,
		            confirm_password: confirmPassword,
		            rand : Math.floor(Math.random()*100000)
		        };
				
				$.post(path,  request,   function(data, status, xhr){	
					
					if(data.success_message){
						console.log(data.message);
						$('#popup').show()
						$('#popup').text(data.success_message);
						setTimeout(function() { $('#popup').fadeOut(2000); }, 3000);
						setTimeout(function() { loginUser(username, password); }, 2000);
						
					}
					if(data.error_message){
						console.log(data.message);
						$('#username_not_available').show()
						$('#username_not_available').text(data.error_message  + '<br/> Please select another username. If this problem persists please ask for help!');
						setTimeout(function() { $('#username_not_available').fadeOut(6000); }, 5000);
					}
					if(data.password_error_message){
						console.log(data.message);
						$('#username_not_available').show()
						$('#username_not_available').text(data.password_error_message  + '<br/>  If this problem persists please ask for help!');
						setTimeout(function() { $('#username_not_available').fadeOut(6000); }, 5000);
					}
					if(data.email_error_message){
						console.log(data.message);
						$('#username_not_available').show()
						$('#username_not_available').text(data.email_error_message  + '<br/>  If this problem persists please ask for help!');
						setTimeout(function() { $('#username_not_available').fadeOut(6000); }, 5000);
					}
					
					
				}, "json");	
		}
		
		function loginUser(username, password){
			
			path = "/login/login_user_from_create" ;
			var request= {
		            action : path,
		            username: username,
		            password: password,
		            rand : Math.floor(Math.random()*100000)
		        };
				
				$.post(path,  request,   function(data, status, xhr){	
					
					if(data.success_message){
						console.log(data.message);
						$('#popup').show()
						$('#popup').text(data.success_message);
						setTimeout(function() { $('#logged_in').fadeOut(2000); }, 3000);
						setTimeout(function() { nextPage(username); }, 3000);
					}
					if(data.error_message){
						console.log(data.message);
						$('#error_message').show()
						$('#error_message').text(data.error_message);
						setTimeout(function() { $('#error_message').fadeOut(3000); }, 5000);
					}
					
					
				}, "json");	
		}
		
		
		
		
		function checkAvailability(){
			username = $('#tags').val();
			path = "/user/checkUsernameAvailable" ;
			var request= {
		            action : path,
		            username: username,
		            rand : Math.floor(Math.random()*100000)
		        };
				
				$.post(path,  request,   function(data, status, xhr){	
					
					if(data.success_message){
						console.log(data.message);
						$('#username_available').show()
						$('#username_available').text(data.success_message);
						setTimeout(function() { $('#username_available').fadeOut(3000); }, 3000);
					}else if(data.error_message){
						console.log(data.error_message);
						$('#username_not_available').show()
						$('#username_not_available').text(data.error_message);
						setTimeout(function() { $('#username_not_available').fadeOut(3000); }, 3000);
					}
					
				}, "json");	
		}
		
		function nextPage(username){
			var location = "/page/pickSession?username=" + username;
			window.location.href = location ;
		}
		
		function logUserIn(username){
			var location = "/login/login?username=" + username;
			window.location.href = location ;
		}
	
	
//	  	$( function() {
//		    var dwarfs = [  
//		    	"Grumpy", "Sleepy", "Sneezy","Doc", "Bashful", "Dopey", "Happy"
//		    	];
//		    var planets = [  
//		    	"Mercury", "Venus", "Earth","Mars", "Jupiter", "Saturn", "Uranus", "Neptune", "Pluto"
//		    	];
		    
//		    function randomIntFromInterval(min,max)
//		    {
//		        return Math.floor(Math.random()*(max-min+1)+min);
//		    }
		    
//		    function generateTags(){
//		    	availableTags = [];
		    
//		    	for(i = 0; i < 10; i++){
//		    		var dwarf = randomIntFromInterval(0,6);
//			    	var planet = randomIntFromInterval(0,9);
//			    	availableTags.push(dwarfs[dwarf] + planets[planet] + randomIntFromInterval(100,999));
//		    	}
		    	
//		    	return availableTags;
//		    }
		    
//		    $( "#tags" ).autocomplete({
//		    	minLength: 0,
//		    	source: function (request, response) {
//		    		availableTags = generateTags();
//		            response(availableTags);
//		        }
//		    });
//		});

		
		$( document ).ready(function() {
//			$("#tags").bind('focus', function(){
//				  if($(this).val()=="" || $(this).val() != ""){ 
//				     $(this).autocomplete("search");
//				  } 
//			});
		});
		
		
	</script>	
	
</head>
<body>
	<div class='container'>
		<div class='innerDiv'>
			<p>
			<h1>Welcome to the generate user page</h1>
			</p>
		</div>
	
	<form method="post" action="../login/login">
		
		<p>
		
		</p>
		<div class='clear spacer_twenty'></div>
		<div class='clear spacer_twenty'></div>
		<div class='clear spacer_twenty'></div>
		<div class='cellContainer'>
			<div class='innercellContainer'>
				<div class='cellDiv left'>Email: </div><div class='cellDiv left'><input id='email' type="email" name="email"></div>
			</div>	
		</div>
		<div class='clear spacer_twenty'></div>
		<div class='cellContainer'>
			<div class='innercellContainer'>
			<div class='cellDiv left'>Password: </div><div class='cellDiv left'><input id='password' type="password" name="password"></div>
			</div>
		</div>
		<div class='cellContainer'>
			<div class='innercellContainer'>
			<div class='cellDiv left'>Confirm Password: </div><div class='cellDiv left'><input id='confirm_password' type="password" name="confirm_password"></div>
			</div>
		</div>
		<div class='clear spacer_twenty'></div>
		<div class='clear spacer_twenty'></div>
		<div class='clear spacer_twenty'></div>
	</form>
		<div class='vertical_spacer_ten'></div>
		<div class='vertical_spacer_ten'></div>
			<b>Please make up a password consisting of 3 characters or more that you can easily remember.</b>
		<div class='vertical_spacer_ten'></div>
		<div class='vertical_spacer_ten'></div>
		<div class='vertical_spacer_ten'></div>
		<div class='vertical_spacer_ten'></div>
		<div class='vertical_spacer_ten'></div>
		<div class='vertical_spacer_ten'></div>
		<div class='cellContainer'>
			<div class='hundred button_height '>
				<div class='ninety'>
				<div class='spacer_right right'></div>		 
					 <a id='pb' href="#" onclick="createUser();" class="fifty_w_h  right button dark_grey "><div class="center_text">Create Account</div></a>
				</div>
			</div>
		</div>
		
		<div class='vertical_spacer_ten'></div>
		<div class='vertical_spacer_ten'></div>
		<div class='vertical_spacer_ten'></div>
		<div class='vertical_spacer_ten'></div>
		<div id='popup' class='green'></div>
		<div id='logged_in' class='green'></div>
		<div id='username_available' class='green'></div>
		<div id='username_not_available' class='red'></div>
		<div id='error_message' class='red'></div>
	</div>
</body>
</html>

